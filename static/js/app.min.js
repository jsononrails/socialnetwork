!function e(t,r,n){function s(a,o){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var f=r[a]={exports:{}};t[a][0].call(f.exports,function(e){var r=t[a][1][e];return s(r?r:e)},f,f.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(e,t){var r=e("../models/Friends");t.exports=Ractive.extend({template:e("../../tpl/find-friends"),components:{navigation:e("../views/Navigation"),appfooter:e("../views/Footer")},data:{loading:alse,message:"",searchFor:"",foundFriends:null},onrender:function(){var e=new r,t=this;this.on("find",function(){t.set("loading",!0),t.set("message","");var r=this.get("friendName");e.find(r,function(e,n){n.friends&&n.friends.length>0?t.set("foundFriends",n.friends):(t.set("foundFriends",null),t.set("message","Sorry, there is no friends matching <strong>"+r+"</strong>")),t.set("loading",!1)})}),this.on("add",function(r,n){t.set("loading",!0),e.add(n,function(e,r){t.set("foundFriends",null),e?t.set("message","Operation failed."):"OK"===r.success&&t.set("message","Operation successful."),t.set("loading",!1)})})}})},{"../../tpl/find-friends":14,"../models/Friends":9,"../views/Footer":12,"../views/Navigation":13}],2:[function(e,t){t.exports=Ractive.extend({template:e("../../tpl/home"),components:{navigation:e("../views/Navigation"),appfooter:e("../views/Footer")},onrender:function(){console.log("Home page rendered")}})},{"../../tpl/home":16,"../views/Footer":12,"../views/Navigation":13}],3:[function(e,t){t.exports=Ractive.extend({template:e("../../tpl/profile"),components:{navigation:e("../views/Navigation"),appfooter:e("../views/Footer")},data:{friends:[]},onrender:function(){var e=this;this.set(userModel.get("value")),this.on("updateProfile",function(){userModel.set("value.firstName",this.get("firstName")),userModel.set("value.lastName",this.get("lastName")),""!=this.get("password")&&userModel.set("value.password",this.get("password")),userModel.save(function(t){t?e.set("error",t.error):(e.set("error",!1),e.set("success","Profile updated successfully."))})})}})},{"../../tpl/profile":18,"../views/Footer":12,"../views/Navigation":13}],4:[function(e,t){t.exports=Ractive.extend({template:e("../../tpl/register"),components:{navigation:e("../views/Navigation"),appfooter:e("../views/Footer")},onrender:function(){var e=this;this.observer("firstName",userModel.setter("value.firstName")),this.observer("lastName",userModel.setter("value.lastName")),this.observer("email",userModel.setter("value.email")),this.observer("password",userModel.setter("value.password")),this.on("register",function(){userModel.create(function(t){t?e.set("error",t.error):(e.set("error",!1),e.set("success",'Registration successful. Click <a href="/login">here</a> to login.'))})})}})},{"../../tpl/register":19,"../views/Footer":12,"../views/Navigation":13}],5:[function(e){var t,r,n=e("./lib/Router")(),s=e("./controllers/Home"),i=e("./controllers/Register"),a=e("./controllers/Profile"),o=e("./controllers/FindFriends"),l=e("./models/User"),f=function(e){t&&t.teardown(),t=e,r.innerHTML="",t.render(r),t.on("navigation.goto",function(e,t){n.navigate(t)})};window.onload=function(){r=document.querySelector("body"),userModel=new l,userModel.fetch(function(){n.add("home",function(){var e=new s;f(e)}).add("register",function(){var e=new i;f(e)}).add("login",function(){var e=new Login;f(e)}).add("profile",function(){if(userModel.isLogged()){var e=new a;f(e)}else n.navigate("login")}).add("find-friends",function(){if(userModel.isLogged()){var e=new o;f(e)}else n.navigate("login")}).add(function(){n.navigate("home")}).listen().check()})}},{"./controllers/FindFriends":1,"./controllers/Home":2,"./controllers/Profile":3,"./controllers/Register":4,"./lib/Router":7,"./models/User":10}],6:[function(e,t){t.exports={request:function(e){"string"==typeof e&&(e={url:e}),e.url=e.url||"",e.method=e.method||"get",e.data=e.data||{};var t=function(e,t){var r,n=[];for(var s in e)n.push(s+"="+encodeURIComponent(e[s]));return r=n.join("&"),""!=r?t?t.indexOf("?")<0?"?"+r:"&"+r:r:""},r={host:{},process:function(e){var r=this;return this.xhr=null,window.ActiveXObject?this.xhr=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(this.xhr=new XMLHttpRequest),this.xhr&&(this.xhr.onreadystatechange=function(){if(4==r.xhr.readyState&&200==r.xhr.status){var t=r.xhr.responseText;e.json===!0&&"undefined"!=typeof JSON&&(t=JSON.parse(t)),r.doneCallback&&r.doneCallback.apply(r.host,[t,r.xhr])}else 4==r.xhr.readyState&&r.failCallback&&r.failCallback.apply(r.host,[r.xhr]);r.alwaysCallback&&r.alwaysCallback.apply(r.host,[r.xhr])}),"get"==e.method?this.xhr.open("GET",e.url+t(e.data,e.url),!0):(this.xhr.open(e.method,e.url,!0),this.setHeaders({"X-Requested-With":"XMLHttpRequest","Content-type":"application/x-www-form-urlencoded"})),e.headers&&"object"==typeof e.headers&&this.setHeaders(e.headers),setTimeout(function(){"get"==e.method?r.xhr.send():r.xhr.send(t(e.data))},20),this},done:function(e){return this.doneCallback=e,this},fail:function(e){return this.failCallback=e,this},always:function(e){return this.alwaysCallback=e,this},setHeaders:function(e){for(var t in e)this.xhr&&this.xhr.setRequestHeader(t,e[t])}};return r.process(e)}}},{}],7:[function(e,t){t.exports=function(){return{routes:[],root:"/",getFragment:function(){var e="";return e=this.clearSlashes(decodeURI(location.pathname+location.search)),e=e.replace(/\?(.*)$/,""),e="/"!=this.root?e.replace(this.root,""):e,this.clearSlashes(e)},clearSlashes:function(e){return e.toString().replace(/\/$/,"").replace(/^\//,"")},add:function(e,t){return"function"==typeof e&&(t=e,e=""),this.routes.push({re:e,handler:t}),this},check:function(e,t){for(var r,n="undefined"!=typeof e?e.replace(/^\//,""):this.getFragment(),s=0;s<this.routes.length;s++){var i,a=this.routes[s].re;a=a.replace(/^\//,"");var r=a.match(/:[^\s\/]+/g),o=new RegExp("^"+a.replace(/:[^\s\/]+/g,"([\\w-]+)"));if(i=n.match(o)){i.shift();var l={};if(r)for(var f=0;f<r.length;f++){var u=r[f];l[u.substr(1,u.length)]=i[f]}return this.routes[s].handler.apply({},(t||[]).concat([l])),this}}return!1},listen:function(){var e=this,t=e.getFragment(),r=function(){t!==e.getFragment()&&(t=e.getFragment(),e.check(t))};return clearInterval(this.interval),this.interval=setInterval(r,50),this},navigate:function(e){return e=e?e:"",history.pushState(null,null,this.root+this.clearSlashes(e)),this}}}},{}],8:[function(e,t){var r=e("../lib/Ajax");t.exports=Ractive.extend({data:{value:null,url:""},create:function(e){var t=this;return r.request({url:t.get("url"),method:"POST",data:this.get("value"),json:!0}).done(function(t){e&&e(null,t)}).fail(function(t){e&&e(JSON.parse(t.responseText))}),this},save:function(e){var t=this;return r.request({url:t.get("url"),method:"PUT",data:this.get("value"),json:!0}).done(function(t){e&&e(null,t)}).fail(function(t){e&&e(JSON.parse(t.responseText))}),this},del:function(e){var t=this;return r.request({url:t.get("url"),method:"DELETE",json:!0}).done(function(t){e&&e(null,t)}).fail(function(t){e&&e(JSON.parse(t.responseText))}),this},fetch:function(){var e=this;return r.request({url:e.get("url"),json:!0}).done(function(t){e.set("value",t)}).fail(function(){e.fire("Error fetching "+e.get("url"))}),this},bindComponent:function(e){return e&&this.observer("value",function(t){for(var r in t)e.set(r,t[r])},{init:!1}),this}})},{"../lib/Ajax":6}],9:[function(e,t){var r=e("../lib/Ajax"),n=e("./Base");t.exports=n.extend({data:{url:"/api/friends"},find:function(e,t){r.request({url:this.get("url")+"/find",method:"POST",data:{searchFor:e},json:!0}).done(function(e){t(null,e)}).fail(function(e){t(JSON.parse(e.responseText))})},add:function(e,t){r.request({url:this.get("url")+"/add",method:"POST",data:{id:e},json:!0}).done(function(e){t(null,e)}).fail(function(e){t(JSON.parse(e.responseText))})}})},{"../lib/Ajax":6,"./Base":8}],10:[function(e,t){var r=e("../lib/Ajax"),n=e("./Base");t.exports=n.extend({data:{url:"/api/user"},login:function(e){r.reques({url:this.get("url")+"/login",method:"POST",data:{email:this.get("email"),password:this.get("password")},json:!0}).done(function(t){e(null,t)}).fail(function(t){e(JSON.parse(t.responseText))})},isLogged:function(){return this.get("value.firstName")&&this.get("value.lastName")}})},{"../lib/Ajax":6,"./Base":8}],11:[function(e,t){var r=e("./Base");t.exports=r.extend({data:{url:"/api/version"}})},{"./Base":8}],12:[function(e,t){var r=e("../models/Version");t.exports=Ractive.extend({template:e("../../tpl/footer"),onrender:function(){var e=new r;e.bindComponent(this).fetch()}})},{"../../tpl/footer":15,"../models/Version":11}],13:[function(e,t){t.exports=Ractive.extend({template:e("../../tpl/navigation"),onconstruct:function(){this.data.isLogged=userModel.isLogged()}})},{"../../tpl/navigation":17}],14:[function(e,t){t.exports={v:1,t:[{t:7,e:"header",f:[{t:7,e:"navigation"}]}," ",{t:7,e:"div",a:{"class":"hero"},f:[{t:7,e:"h1",f:["Find friends"]}]}," ",{t:7,e:"form",a:{onsubmit:"return false;"},f:[{t:4,n:50,r:"loading",f:[{t:7,e:"p",f:["Loading. Please wait."]}]},{t:4,n:51,f:[{t:7,e:"label",a:{"for":"friend-name"},f:["Please, type the name of your friend:"]}," ",{t:7,e:"input",a:{type:"text",id:"friend-name",value:[{t:2,r:"friendName"}]}}," ",{t:7,e:"input",a:{type:"button",value:"Find"},v:{click:"find"}}],r:"loading"}]}," ",{t:4,n:50,x:{r:["foundFriends"],s:"_0!==null"},f:[{t:7,e:"div",a:{"class":"friends-list"},f:[{t:4,n:52,r:"foundFriends",f:[{t:7,e:"div",a:{"class":"friend-list-item"},f:[{t:7,e:"h2",f:[{t:2,r:"firstName"}," ",{t:2,r:"lastName"}]}," ",{t:7,e:"input",a:{type:"button",value:"Add as a friend"},v:{click:{n:"add",d:[{t:2,r:"id"}]}}}]}]}]}]},{t:4,n:50,x:{r:["message"],s:'_0!==""'},f:[{t:7,e:"div",a:{"class":"friends-list"},f:[{t:7,e:"p",f:[{t:3,r:"message"}]}]}]},{t:7,e:"appfooter"}]}},{}],15:[function(e,t){t.exports={v:1,t:[{t:7,e:"footer",f:["Version: ",{t:2,r:"version"}]}]}},{}],16:[function(e,t){t.exports={v:1,t:[{t:7,e:"header",f:[{t:7,e:"navigation"}," ",{t:7,e:"div",a:{"class":"hero"},f:[{t:7,e:"h1",f:["Social Network"]}]}]}," ",{t:7,e:"appfooter"}]}},{}],17:[function(e,t){t.exports={v:1,t:[{t:7,e:"nav",f:[{t:7,e:"ul",f:[{t:7,e:"li",f:[{t:7,e:"a",v:{click:{n:"goto",a:"home"}},f:["Home"]}]}," ",{t:4,n:50,x:{r:["isLogged"],s:"!_0"},f:[{t:7,e:"li",f:[{t:7,e:"a",v:{click:{n:"goto",a:"register"}},f:["Register"]}]}," ",{t:7,e:"li",f:[{t:7,e:"a",v:{click:{n:"goto",a:"login"}},f:["Login"]}]}]},{t:4,n:51,f:[{t:7,e:"li",a:{"class":"right"},f:[{t:7,e:"a",v:{click:{n:"goto",a:"logout"}},f:["Logout"]}]}," ",{t:7,e:"li",a:{"class":"right"},f:[{t:7,e:"a",v:{click:{n:"goto",a:"profile"}},f:["Profile"]}]}," ",{t:7,e:"li",a:{"class":"right"},f:[{t:7,e:"a",v:{click:{n:"goto",a:"find-friends"}},f:["Find Friends"]}]}],x:{r:["isLogged"],s:"!_0"}}]}]}]}},{}],18:[function(e,t){t.exports={v:1,t:[{t:7,e:"header",f:[{t:7,e:"navigation"}]}," ",{t:7,e:"div",a:{"class":"hero"},f:[{t:7,e:"h1",f:["Profile"]}]}," ",{t:7,e:"form",f:[{t:4,n:50,x:{r:["error"],s:'_0&&_0!=""'},f:[{t:7,e:"div",a:{"class":"error"},f:[{t:2,r:"error"}]}]}," ",{t:4,n:50,x:{r:["success"],s:'_0&&_0!=""'},f:[{t:7,e:"div",a:{"class":"success"},f:[{t:3,r:"success"}]}]},{t:4,n:51,f:[{t:7,e:"label",a:{"for":"first-name"},f:["First name"]}," ",{t:7,e:"input",a:{type:"text",id:"first-name",value:[{t:2,r:"firstName"}]}}," ",{t:7,e:"label",a:{"for":"last-name"},f:["Last name"]}," ",{t:7,e:"input",a:{type:"text",id:"last-name",value:[{t:2,r:"lastName"}]}}," ",{t:7,e:"label",a:{"for":"password"},f:["Password"]}," ",{t:7,e:"input",a:{type:"password",id:"password",value:[{t:2,r:"password"}]}}," ",{t:7,e:"input",a:{type:"button",value:"update"},v:{click:"register"}}],x:{r:["success"],s:'_0&&_0!=""'}}]}," ",{t:7,e:"appfooter"}]}},{}],19:[function(e,t){t.exports={v:1,t:[{t:7,e:"header",f:[{t:7,e:"navigation"}]}," ",{t:7,e:"div",a:{"class":"hero"},f:[{t:7,e:"h1",f:["Register"]}]}," ",{t:7,e:"form",f:[{t:4,n:50,x:{r:["error"],s:'_0&&_0!=""'},f:[{t:7,e:"div",a:{"class":"error"},f:[{t:2,r:"error"}]}]}," ",{t:4,n:50,x:{r:["success"],s:'_0&&_0!=""'},f:[{t:7,e:"div",a:{"class":"success"},f:[{t:3,r:"success"}]}]},{t:4,n:51,f:[{t:7,e:"label",a:{"for":"first-name"},f:["First name"]}," ",{t:7,e:"input",a:{type:"text",id:"first-name",value:[{t:2,r:"firstName"}]}}," ",{t:7,e:"label",a:{"for":"last-name"},f:["Last name"]}," ",{t:7,e:"input",a:{type:"text",id:"last-name",value:[{t:2,r:"lastName"}]}}," ",{t:7,e:"label",a:{"for":"email"},f:["Email"]}," ",{t:7,e:"input",a:{type:"text",id:"email",value:[{t:2,r:"email"}]}}," ",{t:7,e:"label",a:{"for":"password"},f:["Password"]}," ",{t:7,e:"input",a:{type:"password",id:"password",value:[{t:2,r:"password"}]}}," ",{t:7,e:"input",a:{type:"button",value:"register"},v:{click:"register"}}],x:{r:["success"],s:'_0&&_0!=""'}}]}," ",{t:7,e:"appfooter"}]}},{}]},{},[5]);